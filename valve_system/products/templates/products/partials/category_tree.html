{% if categories %}
<ul class="list-unstyled ps-3 collapse show" id="collapse-{{ parent_id }}">
    {% for category in categories %}
    <li class="mb-1">
        <div class="d-flex align-items-center justify-content-between">
            <a href="{% url 'product_list' %}?category={{ category.id }}"
                class="text-decoration-none text-dark d-block py-1 {% if request.GET.category == category.id|stringformat:'s' %}fw-bold text-primary{% endif %}">
                {{ category.name }}
            </a>
            {% if category.children.exists %}
            <button class="btn btn-sm btn-link text-decoration-none text-muted p-0" type="button"
                data-bs-toggle="collapse" data-bs-target="#collapse-{{ category.id }}" aria-expanded="true">
                <i class="fas fa-chevron-down small"></i>
            </button>
            {% endif %}
        </div>
        {% if category.children.exists %}
        {% include "products/partials/category_tree.html" with categories=category.children.all parent_id=category.id %}
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% endif %}