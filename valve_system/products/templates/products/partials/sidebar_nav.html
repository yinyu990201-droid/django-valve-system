<div class="card shadow-sm border-0 mb-4">
    <div class="card-header bg-white border-bottom">
        <h5 class="mb-0 fw-bold"><i class="fas fa-list-ul me-2 text-primary"></i>产品分类</h5>
    </div>
    <div class="card-body p-2">
        <ul class="list-unstyled mb-0">
            {% for category in root_categories %}
            <li class="mb-2">
                <div class="d-flex align-items-center justify-content-between">
                    <a href="{% url 'product_list' %}?category={{ category.id }}"
                        class="fw-bold text-decoration-none text-dark d-block py-1">{{ category.name }}</a>
                    {% if category.children.exists %}
                    <button class="btn btn-sm btn-link text-decoration-none text-muted p-0" type="button"
                        data-bs-toggle="collapse" data-bs-target="#collapse-{{ category.id }}" aria-expanded="true"><i
                            class="fas fa-chevron-down small"></i></button>
                    {% endif %}
                </div>
                {% if category.children.exists %}
                {% include "products/partials/category_tree.html" with categories=category.children.all
                parent_id=category.id %}
                {% endif %}
            </li>
            {% empty %}
            <p class="text-muted small ms-2">No categories found.</p>
            {% endfor %}
        </ul>
    </div>
</div>